---
title: "A {fun} Intro to R Programming"
subtitle: "The basics,<br>data wrangling,<br>and more!"
author: '<br>Fabio Votta <br><br> <a href="http://github.com/favstats"><i class="fa fa-github fa-fw"></i>favstats</a> <br> <a href="https://twitter.com/favstats"> <i class="fa fa-twitter fa-fw"></i>@favstats</a> <br> <a href="http://www.favstats.eu/"><i class="fa fa-address-card"></i>www.favstats.eu</a><br> <a href="https://develop-rpkgs.netlify.app"/><i class="fa fa-paper-plane fa-fw"></i>develop-rpkgs.netlify.app</a> <br><br>2021-07-09'
output: 
  xaringan::moon_reader:
    css:
      - default
      - css/lexis.css
      - css/lexis-fonts.css
    lib_dir: libs
    seal: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      slideNumberFormat: "%current%<br>"
      ratio: "16:9"
    includes:
      after_body: "collapseoutput.js"
---


layout: true

<style>
.onehundredtwenty {
  font-size: 120%;
   }

<style>
.ninety {
  font-size: 90%;
   }

.eightyfive {
  font-size: 85%;
   }
   
.eighty {
  font-size: 80%;
   }
   
.seventyfive {
  font-size: 75%;
   }
   
.seventy {
  font-size: 70%;
   }
   
.fifty {
  font-size: 50%;
   }
   
.forty {
  font-size: 40%;
   }
</style>


```{r meta, echo=FALSE}
library(metathis)
meta() %>%
  meta_general(
    description = "Intro to R Programming",
    generator = "xaringan and remark.js"
  ) %>%
  meta_name("github-repo" = "favstats/xxx") %>%
  meta_social(
    title = "Intro to R Programming",
    url = "https://www.favstats.eu",
    og_type = "website",
    og_author = "Fabio Votta",
    twitter_card_type = "summary_large_image",
    twitter_creator = "@favstats"
  )
```

```{r setup, include=FALSE}
# dateWritten <- format(as.Date('2020-05-04'), format="%B %d %Y")
workshop_day <- format(as.Date("2021-07-09"), format="%B %d %Y")
pacman::p_load(tidyverse, fontawesome, tidyverse, knitr)

options(
    htmltools.dir.version = FALSE,
    knitr.table.format = "html",
    knitr.kable.NA = ''
)
knitr::opts_chunk$set(
    warning = FALSE,
    message = FALSE,
    fig.path = "figs/",
    fig.width = 7.252,
    fig.height = 4,
    comment = "#>",
    fig.retina = 3 # Better figure resolution
)
# Enables the ability to show all slides in a tile overview by pressing "o"
xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()
xaringanExtra::use_clipboard()
xaringanExtra::use_share_again()
xaringanExtra::style_share_again(share_buttons = "all")
xaringanExtra::use_extra_styles(
  hover_code_line = TRUE,
  mute_unhighlighted_code = FALSE
)
# xaringanExtra::use_webcam()


knitr::opts_chunk$set(warning = F, message = F) # Whether to display errors
```

---
class: banner


---
name: title-slide
class: primary


#.fancy[`r rmarkdown::metadata$title`] 

###.fancy[`r rmarkdown::metadata$subtitle`]


<br>


Fabio Votta

[`r fa(name = "twitter", fill = "black")` @favstats](http://twitter.com/favstats)<br>
[`r fa(name = "github", fill = "black")` @favstats](http://github.com/favstats)<br>
[`r fa(name = "link", fill = "black")` favstats.eu](https://www.favstats.eu)


`r workshop_day`



---

### Your friendly neighborhood R Instructor

.leftcol20[
```{r, echo = F}
knitr::include_graphics("images/me.jpg")
```
]

.rightcol80[
+ Ph.D. Candidate in Political Communication at University of Amsterdam

+ Passionate about Data Science

+ Passonate about memes

+ Passionate about Data Science, R and memes together
]

---

### It's normal to struggle at first but it gets better!

```{r, echo = F, out.width="80%", fig.align = 'center'}
knitr::include_graphics("images/r_first_then_new.png")
```


<!-- ![](images/r_first_then_new.png){width=50%} -->

.fifty[Illustration adapted from [Allison Horst](https://twitter.com/allison_horst)]

--

  + My experience is that this stuff isn't super easy... but it gets better!
  
--
  
+ Awesome inclusive community that is always ready to help
+ Active blogosphere with use cases and examples



---
 


## Overview



<!-- 10 am to around 2.15-2.30 pm  -->

```{r, echo=F}

times <- c("10:05 - 10:30", "10:30 - 11:30", "11:30 - noon", "noon - 1 pm", "1 - 2:30 pm")
sections <- c("R & RStudio", "R Basics", "Functions", "tidyverse", "dplyr verbs")

timetable <- tibble(`Time Schedule      ` = times, `Activites & Topics      ` = sections)

knitr::kable(timetable, format = "html")
```

<!-- #### What is <img src="images/rstudio.png" style="display: inline-block; margin: 0"; width="80px"/>? -->

<!-- RStudio is an IDE (Integrated Development Environment). -->

<!-- * Write, save and open R Code (.R/.Rmd files) -->


<!-- Through features like .red[syntax highlighting] and .green[auto-completion] RStudio enables a more intuitive usage of R. -->

<!-- Other IDEs are available of course but in this case we go with the "standard" model. -->


---



<!-- #### What is <img src="images/Rlogo.svg" width="30px" inline-block/> ? -->


#### What is <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

R is a .fancy[statistical] programming language developed for data analysis and visualization.

--

.

--

..

--

...

--

# But why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="60px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->








---

<!-- #### What is <img src="images/Rlogo.svg" width="30px" inline-block/> ? -->


.leftcol[

#### Why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->



+ Amazing Community .forty[(but I already said that)]

<!-- + Outstanding repertoire of statistical & computational methods -->

<!-- -- -->

<!-- + Integrates well with other programming languages (like Python) -->

<!-- -- -->

<!-- + Beautiful Data Visualization with `ggplot2` and more -->

]

.rightcol[


![](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/welcome_to_rstats_twitter.png)

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]

]

---

<!-- #### What is <img src="images/Rlogo.svg" width="30px" inline-block/> ? -->


.leftcol60[

#### Why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible & fun

<!-- + Outstanding repertoire of statistical & computational methods -->

<!-- -- -->

<!-- + Integrates well with other programming languages (like Python) -->

<!-- -- -->

<!-- + Beautiful Data Visualization with `ggplot2` and more -->

]

.rightcol40[

<br>

![](https://github.com/allisonhorst/stats-illustrations/blob/master/rstats-artwork/tidyverse_celestial.png?raw=true)

.fifty[Artist: [Allison Horst](https://github.com/allisonhorst)]

]

---

.leftcol60[

#### Why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible & fun

+ Outstanding repertoire of statistical & computational methods

<!-- + Integrates well with other programming languages (like Python) -->

<!-- + Beautiful Data Visualization with `ggplot2` and more -->

]

.rightcol40[

<br>

![](https://pbs.twimg.com/media/E4mDfxSXEAA_kvG.jpg)
.fifty[ [easystats](https://github.com/easystats/easystats) packageverse for statistical analysis.]


]

---

.leftcol60[

#### Why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible & fun

+ Outstanding repertoire of statistical & computational methods

+ Integrates well with other programming languages

<!-- + Beautiful Data Visualization with `ggplot2` and more -->

]

.rightcol40[

<br>

![](https://rstudio.github.io/reticulate/images/reticulated_python.png)
.fifty[ [reticulate](https://github.com/easystats/easystats) R package integrates with Python.]


]

---

.leftcol60[

#### Why learn <img src="images/Rlogo.svg" style="display: inline-block; margin: 0"; width="30px"/>?

<!-- ![](http://www.favstats.eu/img/headers/season_views.png) -->



+ Amazing Community .forty[(but I already said that)]

+ Data wrangling is accessible & fun

+ Outstanding repertoire of statistical & computational methods

+ Integrates well with other programming languages

+ Beautiful data visualization with `ggplot2` 

<br>

<br>


.right[.fifty[Data visualization by [CÃ©dric Scherer](https://www.cedricscherer.com/)]]


]

.rightcol40[


![](https://raw.githubusercontent.com/Z3tt/TidyTuesday/master/plots/2020_31/2020_31_PalmerPenguins.png?raw=true)


]

---


class: inverse, middle, center

# R Basics

--

### Math Operators


---

### Math Operators

At its core R is just a fancy *calculator*

You can do:

`+` addition

`-` subtraction

`*` multiplication

`/` division

`^` exponentiate

---

### Math Operators

At its core R is just a fancy *calculator*

###  `+` addition


.details[
```{r}
15 + 5
```
]


--

### Mixing operators


.details[
```{r}
(15 + 5) / (2 * 5)
```
]

---

## Short excourse: a new data set appears..


But adding up numbers for no reason is no fun.

--

That's why we will use a data set about .fancy[animals] to learn some R Basics.


.leftcol45[
<img src="https://www.pngitem.com/pimgs/m/553-5539545_cartoon-animal-png-humans-and-animals-png-transparent.png" style="width: 100%" />
]

.rightcol55[

[Animal Ageing and Longevity Database](https://www.johnsnowlabs.com/marketplace/the-animal-aging-and-longevity-database/)

Data on over 4200 animals.

Information on age of maturity, gestation or incubation periods but also **longevity (in years)**.

]


---

## Animal Ageing and Longevity Database


Say we want to know how old an animal is in *human years*.

--

We can use the following simple formula to determine that:

<br>

$$\frac{\text{Maximum lifespan human}}{\text{Maximum lifespan non-human animal}} = \text{animal to human years ratio}$$

<br>

*Note: This is just a **very rough** way to determine the conversion ratio. It is **much more** complicated in [reality](https://www.akc.org/expert-advice/health/how-to-calculate-dog-years-to-human-years/).*


---

## Animal Ageing and Longevity Database

.leftcol[

| Animal | Maximum Lifespan |
| --- | --- | 
| Human | 122.5 | 
| Domestic dog | 24.0 | 
| Domestic cat | 30.0 | 
| American alligator | 77.0 | 
| Golden hamster | 3.9 | 
| King penguin | 26.0 | 
| Lion|	27.0 | 
| Greenland shark	 | 392.0 | 
| Galapagos tortoise | 177.0 | 
]


.rightcol[

| Animal | Maximum Lifespan |
| --- | --- | 
| African bush elephant	 | 65.0 | 
| California sea lion	| 35.7	 | 
| Fruit fly		| 0.3	 | 
| House mouse		| 4.0	 |
| Giraffe		| 39.5	 |
| Wild boar		| 27.0	|

Source: [Animal Ageing and Longevity Database](https://www.johnsnowlabs.com/marketplace/the-animal-aging-and-longevity-database/)


]




---

### Math Operators


Say we want to know how old a dog is in *human years*.

--

The observed maximum lifespan of a human is 122.5 years. For dogs it is 24.

--

.details[
```{r}
122/24
```
]

So for every year a human ages, a dog "ages" 5.08 human years. How old is a 15 year old dog in human years?

.details[
```{r}
5.08333333333333*15
```
]



---

## So many numbers..


Now it can be quite tedious to juggle all those numbers around. 

Especially if we want to keep reusing numbers we calculated before.

--

Here to simplify that process are:

**Objects**


---

class: inverse, middle, center

# R Basics

### R Objects

---

## R Objects

You can think of R objects as *saving information*, for example simple numbers or just plain text. 

Once saved we can recall it whenever we want by just running the name of the object.

--

> Everything that exists in R is *.red[an object]*. .fifty[~John M. Chambers]

--

We create R objects by using the assignment operator: 

<center>
.large[**`<-`**]
</center>

.right[
.fifty[You can also assign with the **`=`** sign but we will not be using this here.]
]

---

## R Objects

Here is an example:

```{r}
human_lifespan  <- 122.5
dog_lifespan <- 24
```

If we now run the respective objects we retrieve the saved numbers.

.details[
```{r}
human_lifespan
```
]

.details[
```{r}
dog_lifespan
```
]


---


## R Objects


Now we can perform the same calculation as before but this time using objects!

```{r}
dogs_to_human <- human_lifespan / dog_lifespan
```

The object `dogs_to_human` now holds the dog to human years conversion ratio.

--

*Now* we ask again: how old is a 15 year old dog in human years?

.details[
```{r}
dogs_to_human*15
```
]

---

## A quick note on naming things

.leftcol[
> Note that object names could be *anything* here!  I could have chosen to just name them `x`, `y` and `z`. 



I typically use lower-case snake case in this style: `animal_rights`.
 
Also recommended by the [tidyverse style guide](https://style.tidyverse.org/syntax.html). 
]


.rightcol[
<img src="https://pbs.twimg.com/media/DzH3mPlWwAAYE7q.jpg" style="width: 90%" />

]



---

## More operators..

But wait there are more operators: .fancy[logical operators]

--

Logical operators are used for logical tests which can result in either: 

$\text{TRUE}$ or $\text{FALSE}$

*(sometimes this is also called a boolean variable)*



---
class: inverse, middle, center

# R Basics

### Logical Operators

---

## Logical Operators

Let's first create some more objects to try some logical tests!

```{r}
lion_lifespan <- 27
mouse_lifespan <- 4
fly_lifespan <- 0.3
boar_lifespan <- 27
alligator_lifespan <- 77
greenland_shark_lifespan <- 392
galapagos_tortoise_lifespan <- 177
```


---

## Logical Operators



`==` asks whether two values are the same or **equal**

The code below tests the following statement: 

*The maximum lifespan of a lion equals that of a boar.*

.details[
```{r}
lion_lifespan == boar_lifespan
```
]

--

Since both maximum lifespans are `27` this is of course a **`TRUE`** statement.

---

## Logical Operators

`!=`  asks whether two values are the *not* the same or **unequal**

The code below tests the following statement: 

*The maximum lifespan of a lion **does not equal** that of a boar.*

.details[
```{r}
lion_lifespan != boar_lifespan
```
]

--

Since both maximum lifespans are `27` (as we saw before) this is of course a **`FALSE`** statement.


---


## Logical Operators

We can also test whether certain values are greater or smaller than others:

`>` greater than

The code below tests the statement: 

*The lifespan of a human is greater than the lifespan of a fly.*

.details[
```{r}
human_lifespan > fly_lifespan
```
]

--

Since the maximum human lifespan is `122` and a fly does not live longer than `0.3` years this is of course a **`TRUE`** statement.

---

## Logical Operators


`<` smaller than

The code below tests the statement: 

*The lifespan of an alligator is smaller than the lifespan of a mouse.*

.details[
```{r}
alligator_lifespan < mouse_lifespan
```
]

--

Since the maximum alligator lifespan is `77` and a mouse lives for `4` years maximum, this is of course a **`FALSE`** statement.

--

Also note the following options:

`>=` greater or equals and `<=` smaller or equals

---


## Combine Logical Operators

We can also combine logical tests by testing multiple statements at the same time:

* `&` stands for "and" (unsurprisingly)
* `|` stands for "or"

For example both `alligator_lifespan` and `fly_lifespan` have to be greater than `mouse_lifespan` for the code below to evaluate as `TRUE`.

.details[
```{r}
alligator_lifespan > mouse_lifespan & 
fly_lifespan > mouse_lifespan
```
]



---



## Combine Logical Operators

We can also combine logical tests by testing multiple statements at the same time:

* `&` stands for "and" (unsurprisingly)
* `|` stands for "or"

If we say `|` (= or) instead, it means either statement evaluation to `TRUE` is enough!

.details[
```{r}
alligator_lifespan > mouse_lifespan | 
fly_lifespan > mouse_lifespan
```
]

---


## Even more objects..?

Now we learned about operators and some basic objects. 

But so far objects have only ever held a *single numeric value*. 

R is of course much more powerful than that and objects can hold any number and types of data.

--

Now we will take a look at **vectors**, or objects that include more than one value.

---

class: inverse, middle, center

# R Basics

### Vectors

---

## Vectors

You can simply imagine vectors as a list of values. They can consist of numbers but also *strings* (or: text).

In order to create a vector in R we make use of `c()` (stands for *concatenate*)


.details[
```{r}
c(1, 100, 1000, 2000, 5000)
```
]

We can also create a vector of strings by using quotes:


.details[
```{r}
c("I", "am", "a", "vector", "of", "strings")
```
]

---


## Vectors

We can combine the lifespans we assigned into objects earlier:


```{r}
animal_lifespans <-  c(greenland_shark_lifespan, dog_lifespan, 
  galapagos_tortoise_lifespan,
  mouse_lifespan, fly_lifespan,
  lion_lifespan, boar_lifespan,
  alligator_lifespan, human_lifespan)
```

.details[
```{r}
animal_lifespans
```
]


---


## Vectors

We can also create a vector of strings by using quotes:

.details[
```{r}
animals <- c("greenland_shark", "dog", 
  "galapagos_tortoise", "mouse", 
  "fly", "lion", "boar",
  "alligator", "human")
```
]


.details[
```{r}
animals
```
]


---


Notice how the operation is performed for each item separately and the result is yet another vector.

---


## Vectors

We can also use *logical* operators with vectors:

```{r}
times == 600
```

Again, notice how the operation is performed for each item separately and the result is yet another vector, this time consisting of `TRUE`s and `FALSE`s.

---


## Vectors

An incredibly useful operator for vectors is `%in%`. This checks whether a certain value occurs within your vector.

```{r}
fruits <- c("bananas", "apples", "oranges")
```


Does `apples` occur within our `fruits` vectors?

```{r}
"apples" %in% fruits
```

Does `pears` occur within our `fruits` vectors?

```{r}
"pears" %in% fruits
```

---



---

## Operators

So how much time of my life did I spent at universities so far?

```{r}
8 / (2021-1991) * 100
```

I spent more than a quarter of my life in higher education!

---

## Functions

The goal of a function is to process data. There is also an entrance and an exit.

Let's define a function which squares numeric values. To do this, we use `function()` and encoded what is supposed to happen curly brackets `{}`

```{r}
square <- function(input) { 
  output <- input^2        
  output                  
}
```

```{r}
square(2)   
```



> Tip: In RStudio we can just type `fun` and enter after the popup and RStudio will just automatically generate a template for a function.

---


## RStudio Cloud

For the purposes of this workshop we are going to use **RStudio Cloud**.

RStudio Cloud provides an online environment for teaching.

.blue[Upsides] 

+ No need to set up R and RStudio on your own computer

.red[Downsides]

+ You will have to set up R and RStudio on your own computer (when you want to use R on your own)

Why are we using it? For me it's important that you will have a smooth and easy experience in this workshop. RStudio Cloud allows us to have that.

---
